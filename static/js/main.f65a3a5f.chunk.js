(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{17:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),s=(a(17),a(6)),i=a.n(s),u=a(11),l=a(9),j=a(3),b=a(5),m=(a(19),function(){var e=Object(l.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://pixabay.com/api/","?q=").concat(t,"&page=").concat(a,"&key=").concat("11753469-fae5ae7c0c549b8c5c7373ba2","&image_type=photo&orientation=horizontal&per_page=12"));case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),d=m,h=a(1);var f=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(j.a)(a,2),c=r[0],o=r[1];return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),o("")):b.b.error("Please enter search request!")},children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){o(e.target.value)},value:c})]})})},p=a(2),O=a.n(p);function g(e){var t=e.webformatURL,a=e.showImageHandle;return Object(h.jsx)("li",{className:"ImageGalleryItem",children:Object(h.jsx)("img",{src:t,alt:"",className:"ImageGalleryItem-image",onClick:a})})}function x(e){var t=e.images,a=e.showImageHandler;return Object(h.jsx)("ul",{className:"ImageGallery",children:t.map((function(e,t){return Object(h.jsx)(g,{webformatURL:e.webformatURL,showImageHandle:a(e.largeImageURL),index:t},e.id)}))})}function v(e){var t=e.loadMoreHandler;return Object(h.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}g.propType={img:O.a.string.isRequired,showImageHandle:O.a.func.isRequired},v.propType={loadMoreHandler:O.a.func.isRequired};var w=a(12),S=a.n(w),y=(a(41),function(){return Object(h.jsx)("div",{className:"Loader",children:Object(h.jsx)(S.a,{type:"ThreeDots",color:"#00BFFF",height:150,width:150})})}),k=document.querySelector("#modalRoot");var N=function(e){var t=e.largeImgURL,a=e.onClose;Object(n.useEffect)((function(){window.addEventListener("keydown",r)})),Object(n.useEffect)((function(){window.removeEventListener("keydown",r)}));var r=function(e){"Escape"===e.code&&a()};return Object(c.createPortal)(Object(h.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&a()},children:Object(h.jsx)("div",{className:"Modal",children:Object(h.jsx)("img",{src:t,alt:""})})}),k)},I=0,H="";var L=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(j.a)(c,2),s=o[0],m=o[1],p=Object(n.useState)(1),O=Object(j.a)(p,2),g=O[0],w=O[1],S=Object(n.useState)(!1),k=Object(j.a)(S,2),L=k[0],R=k[1],E=Object(n.useState)(!1),C=Object(j.a)(E,2),F=C[0],T=C[1],M=Object(n.useState)(""),q=Object(j.a)(M,2),U=q[0],B=q[1];Object(n.useEffect)((function(e){""!==s&&(e!==s&&""!==s||e!==g)&&D()}),[s,g]);var G=function(){var e=document.documentElement.scrollHeight-150;setTimeout((function(){window.scrollTo({top:e,behavior:"smooth"})}),500)},D=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),B(""),e.prev=2,e.next=5,d(s,g);case 5:0!==(t=e.sent).total?(I=Math.ceil(t.totalHits/12),r((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t.hits))}))):(b.b.info("Nothing found for ".concat(s,"!")),r([])),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),B(e.t0.toString());case 13:return e.prev=13,R(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(f,{onSubmit:function(e){I=0,r([]),m(e),w(1)}}),U?Object(h.jsx)("p",{className:"ErrorText",children:U}):Object(h.jsx)(x,{images:a,showImageHandler:function(e){return function(){H=e,T(!0)}},scrollToHandler:G}),L&&Object(h.jsx)(y,{}),a.length>0&&Object(h.jsx)(v,{loadMoreHandler:function(){G(),w(Math.min(I,g+1))}}),F&&Object(h.jsx)(N,{largeImgURL:H,onClose:function(){H="",T(!1)}}),Object(h.jsx)(b.a,{autoClose:2e3})]})};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(L,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f65a3a5f.chunk.js.map